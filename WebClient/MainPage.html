<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
    <input id="StartGame" type="button" value="Press To Start The Game" /><br>
    <label id="status"></label>

    <!--Reference the jQuery library. -->
    <script src="Scripts/jquery-2.1.0.min.js"></script>
    <!--Reference the SignalR library. -->
    <script src="Scripts/jquery.signalR-2.0.2.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="http://localhost:8080/signalr/hubs"></script>

    <script type="text/javascript">
        $(function () {
            //Set the hubs URL for the connection
            $.connection.hub.url = "http://localhost:8080/signalr";

            // Declare a proxy to reference the hub.
            var main = $.connection.serverHub;

            main.client.startGameMsg = function (msg) {
                if (msg == "wait")
                    $('#status').text("Please wait for the other players, the game will start shortly...");
                else if (msg == "start")
                    window.open("/GamePage.html", "_self", false);
            };

            $.connection.hub.start().done(function () {
                $('#StartGame').click(function () {
                    // Call the Send method on the hub.
                    main.server.connectMsg('connect', $.connection.hub.id);
                });
            });
        });
    </script>
</body>
</html>
